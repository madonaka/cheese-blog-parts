<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>대시보드 Cheese Lab Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- CSS -->
  <link rel="stylesheet" href="./admin.css" />
</head>
<body>
  <div class="admin-shell">
    <!-- 상단 헤더 -->
    <div id="admin-header-slot"></div>
    
    <div class="admin-main">
      <!-- 좌측 네비게이션 -->
      <aside id="admin-menu-slot" class="admin-sidebar"></aside>

      <!-- 오른쪽 컨텐츠 영역 -->
      <main>
        <!-- 1) 대시보드 -->
        <section
          id="section-dashboard"
          class="admin-section active"
          data-section="dashboard"
        >
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">요약</div>
                <div class="card-subtitle">
                  구글 시트에서 불러온 퀴즈 세트 통계와 최근 기록을 한눈에 보는 화면
                </div>
              </div>
              <button class="btn btn-primary" id="btn-refresh-all">
                🔄 전체 새로고침
              </button>
            </div>

            <div class="dashboard-grid" id="dashboard-stats">
              <!-- JS에서 채워 넣음 -->
            </div>
            <div class="small-help">
              ※ 지금은 더미 데이터 기준으로 표시되고 있음.  
              Apps Script 웹앱 연결 후, 실제 시험 통계로 바꿀 예정.
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">최근 등록된 examKey</div>
                <div class="card-subtitle">
                  자주 사용하는 연습문제 세트만 간단히 확인
                </div>
              </div>
              <button
                class="btn btn-ghost"
                data-target="quizzes"
                data-jump-nav
              >
                ➜ 퀴즈 세트 관리로 이동
              </button>
            </div>

            <div class="table-wrapper">
              <table class="admin-table" id="dashboard-recent-table">
                <thead>
                  <tr>
                    <th>examKey</th>
                    <th>제목</th>
                    <th>분류</th>
                    <th>문항 수</th>
                    <th>최근 수정</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- JS에서 채움 -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- 2) 퀴즈 세트 관리 -->
        <section
          id="section-quizzes"
          class="admin-section"
          data-section="quizzes"
        >
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">퀴즈 세트 목록</div>
                <div class="card-subtitle">
                  구글 시트에 있는 examKey / 제목 / 시트 탭 등을 한눈에 관리
                </div>
              </div>
              <button class="btn btn-primary" id="btn-reload-quizzes">
                🔄 목록 새로고침
              </button>
            </div>

            <div class="field-row">
              <div class="field">
                <label for="filter-period">시대 / 카테고리 필터</label>
                <select id="filter-period">
                  <option value="">전체</option>
                  <option value="한국사-통사">한국사 통사</option>
                  <option value="한국사-근현대">한국사 근현대</option>
                  <option value="일본사">일본사</option>
                  <!-- 필요하면 여기 계속 추가 -->
                </select>
              </div>
              <div class="field">
                <label for="filter-search">검색 (examKey / 제목)</label>
                <input
                  type="text"
                  id="filter-search"
                  placeholder="예: khs-era-01 / 시대 순서"
                />
              </div>
            </div>

            <div class="table-wrapper">
              <table class="admin-table" id="quiz-table">
                <thead>
                  <tr>
                    <th style="min-width: 120px;">examKey</th>
                    <th style="min-width: 180px;">제목</th>
                    <th>시대·분류</th>
                    <th>출제 개수</th>
                    <th>시트 탭 이름</th>
                    <th>비고</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- JS에서 렌더링 -->
                </tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">선택한 examKey 빠른 복붙용</div>
                <div class="card-subtitle">
                  블로그 포스트용 `.cheese-quiz` HTML 코드를 바로 복사해서 사용
                </div>
              </div>
              <button class="btn" id="btn-copy-snippet">
                📋 코드 복사
              </button>
            </div>

            <div class="field">
              <label for="snippet-output">삽입용 HTML 코드</label>
              <textarea
                id="snippet-output"
                spellcheck="false"
              ></textarea>
              <div class="small-help">
                시험 세트 행을 클릭하면 위 코드가 자동으로 갱신됨.  
                필요에 따라 `data-limit`, `data-period` 속성을 수정해서 사용.
              </div>
            </div>
          </div>
        </section>

        <!-- 3) 도구/설정 화면 -->
        <section
          id="section-tools"
          class="admin-section"
          data-section="tools"
        >
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">연결 정보</div>
                <div class="card-subtitle">
                  Apps Script 웹앱 / 스프레드시트 ID 등 관리자용 메모 공간
                </div>
              </div>
            </div>

            <div class="field-row">
              <div class="field">
                <label>퀴즈 조회용 Apps Script URL</label>
                <input
                  type="text"
                  id="config-api-base"
                  placeholder="https://script.google.com/macros/s/XXXXX/exec"
                />
                <div class="small-help">
                  실제로는 코드 안의 <code>CHEESE_ADMIN_API_BASE</code> 상수와
                  일치해야 함.  
                  <br />여기는 메모/참고용 입력 필드.
                </div>
              </div>
            </div>

            <p class="danger-text">
              ※ 이 페이지는 순수 프론트엔드이기 때문에,
              <strong>시트 수정/삭제 같은 기능은 현재 포함되어 있지 않음</strong>.  
              수정/삭제는 스프레드시트 자체에서 하거나,  
              나중에 별도 보호된 웹앱(인증 포함)을 만든 뒤 연결하는 편이 안전함.
            </p>
          </div>
        </section>
        <section class="admin-section" data-section="tools">
  <h2 class="admin-section-title">도구 · 설정</h2>

  <div class="admin-card">
    <div class="admin-card-header">
      <h3 class="admin-card-title">퀴즈 API 테스트</h3>
      <p class="admin-card-desc">
        Apps Script 웹앱 URL과 파라미터를 넣고 실제로 어떤 JSON이 나오는지 확인하는 도구입니다.
      </p>
    </div>

    <form id="quiz-test-form" class="admin-form-grid">
      <label class="admin-field">
        <span class="admin-label">API URL</span>
        <input
          id="quiz-api-url"
          type="text"
          class="admin-input"
          value="https://script.google.com/macros/s/AKfycbwuvooqtlk6c_Nv2_VgforohP5twqTLWGu5j8uf56D3qvKsUnioAhfbkNdTKIsQaaQF/exec"
        />
      </label>

      <label class="admin-field">
        <span class="admin-label">limit</span>
        <input
          id="quiz-limit"
          type="number"
          class="admin-input"
          value="5"
          min="1"
          max="50"
        />
      </label>

      <label class="admin-field">
        <span class="admin-label">period</span>
        <input
          id="quiz-period"
          type="text"
          class="admin-input"
          placeholder="예: 한국사-통사"
        />
      </label>

      <label class="admin-field">
        <span class="admin-label">topic</span>
        <input
          id="quiz-topic"
          type="text"
          class="admin-input"
          placeholder="예: 시대순서"
        />
      </label>

      <div class="admin-field admin-field-full">
        <button type="submit" class="admin-button primary">
          테스트 호출
        </button>
      </div>
    </form>

    <pre id="quiz-test-result" class="admin-code-preview">
// 위에서 '테스트 호출'을 누르면
// 여기 JSON 결과가 표시됩니다.
    </pre>
  </div>
</section>
      </main>
    </div>
  </div>

<!-- 페이지별 제목/뱃지 설정 -->
<script>
  window.CHEESE_ADMIN_PAGE_SUBTITLE = "대시보드";
  window.CHEESE_ADMIN_PAGE_BADGE    = "dashboard";
  window.CHEESE_ADMIN_ACTIVE_PAGE = "dashboard";
</script>
<script src="./admin/admin-common.js"></script>
  
</body>
</html>
